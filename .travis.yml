language: java
install: true

jdk:
  - openjdk8

services:
  - postgresql

before_script:
  - chmod +x gradlew
  - psql -c 'create database library;' -U postgres
  - psql -U postgres -f src/main/sql/schema.sql
  - psql -U postgres -f src/main/sql/insert_into_books.sql
  - psql -U postgres -f src/main/sql/insert_into_users.sql
  - psql -U postgres -f src/main/sql/insert_into_statuses.sql
  - psql -U postgres -f src/main/sql/insert_into_items.sql
  - mkdir config && cp .travis.database.yml config/database.yml

script:
  - ./gradlew build --scan -s

